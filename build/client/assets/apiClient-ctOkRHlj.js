const a="delegacje_token",l=()=>localStorage.getItem(a),g=e=>{localStorage.setItem(a,e)},T=()=>{localStorage.removeItem(a)},d="http://localhost:5000/api";class n extends Error{statusCode;data;constructor(t,r){super(r.message),this.statusCode=t,this.data=r,this.name="ApiClientError"}}const m={async request(e,t={}){const r=l(),c={"Content-Type":"application/json",...t.headers};r&&(c.Authorization=`Bearer ${r}`);const i=`${d}${e}`;try{const s=await fetch(i,{...t,headers:c}),u=s.headers.get("content-type")?.includes("application/json");let o;if(u&&s.status!==204&&(o=await s.json()),!s.ok){const h=o||{status:"error",message:`HTTP error: ${s.status} ${s.statusText}`};throw new n(s.status,h)}return o}catch(s){throw s instanceof n?s:new n(0,{status:"error",message:s instanceof Error?s.message:"Network error",statusCode:0})}},get(e,t){return this.request(e,{...t,method:"GET"})},post(e,t,r){return this.request(e,{...r,method:"POST",body:t?JSON.stringify(t):void 0})},put(e,t,r){return this.request(e,{...r,method:"PUT",body:t?JSON.stringify(t):void 0})},delete(e,t){return this.request(e,{...t,method:"DELETE"})}};export{m as a,T as c,l as g,g as s};
