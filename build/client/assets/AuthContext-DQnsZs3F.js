import{a as e,q as m}from"./chunk-4WY6JWTD-DBnPwoI9.js";import{a as d}from"./auth-BtFPvg-z.js";import{g as p}from"./apiClient-ctOkRHlj.js";const u=e.createContext(void 0);function y({children:t}){const[c,r]=e.useState(null),[i,s]=e.useState(!0),[l,o]=e.useState(!1),a=async()=>{if(!p()){r(null),s(!1);return}try{const n=await d.me();r(n.employee),o(!1)}catch(n){console.error("Failed to fetch user:",n),r(null),o(!0)}finally{s(!1)}};e.useEffect(()=>{a()},[]);const f=async()=>{s(!0),await a()},h=()=>{r(null),s(!1),o(!1)};return m.jsx(u.Provider,{value:{user:c,isLoading:i,error:l,refetchUser:f,clearAuth:h},children:t})}function E(){const t=e.useContext(u);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}export{y as A,E as u};
